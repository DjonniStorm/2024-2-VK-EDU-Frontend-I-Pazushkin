(()=>{"use strict";function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t(e)}function e(t,e){for(var r=0;r<e.length;r++){var o=e[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,n(o.key),o)}}function n(e){var n=function(e){if("object"!=t(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=t(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==t(n)?n:n+""}var r=function(){return t=function t(e,n,r,o){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._text=e,this._date=n,this._from=r,this._to=o},n=[{key:"render",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:".received-message",e=document.createElement("div");e.classList.add("message",t);var n=document.createElement("p"),r=document.createElement("p"),o=document.createElement("p");return n.innerText=this._from,r.innerText=this._text,o.innerText=this._date,r.classList.add("message__content--text"),[n,r,o].forEach((function(t){t.classList.add("message__content"),e.appendChild(t)})),e}},{key:"messageTime",get:function(){return this._date}},{key:"messageText",get:function(){return this._text}}],n&&e(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,n}();function o(t){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o(t)}function i(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,a(r.key),r)}}function a(t){var e=function(t){if("object"!=o(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==o(e)?e:e+""}var c=new WeakSet,u=function(){return t=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),function(t,e){(function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")})(t,e),e.add(t)}(this,c),this._date=new Date,this._buffer=[],this._storage=new Map,this._chatKey=""},e=[{key:"addMessage",value:function(t,e){this._buffer.push(new r(t,this._date.toLocaleTimeString().substring(0,5),l,e)),this._buffer.length%3==0&&function(t,e,n){if("function"==typeof t?t===e:t.has(e))return arguments.length<3?e:n;throw new TypeError("Private element is not present on this object")}(c,this,s).call(this)}},{key:"chatName",get:function(){return this._chatKey},set:function(t){this._chatKey=t}}],e&&i(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e}();function s(){var t=this._storage.get(this._chatKey);this._buffer.forEach((function(e){return t.push(e)})),this._buffer=[]}var l="–ò–ª—å—è",f=new u,y=document.querySelector(".chat__form"),m=document.querySelector(".chat__form-input"),d=(document.querySelector(".chat__messages-layout"),document.querySelector(".contacts__header-username")),h=(document.querySelector(".contacts__create-contact-btn"),document.querySelector(".contacts__list")),v=document.getElementById("incorrect");function p(t){return p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},p(t)}function b(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,g(r.key),r)}}function g(t){var e=function(t){if("object"!=p(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=p(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==p(e)?e:e+""}var _=function(){return t=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)},e=[{key:"render",value:function(t,e){var n=document.createElement("div"),r=document.createElement("div"),o=document.createElement("div"),i=document.createElement("h3");return o.classList.add("contacts__list-contact"),i.classList.add("contact__name"),n.classList.add("contact__last-msg-text"),r.classList.add("contact__last-msg-time"),n.innerText=e,i.innerText=t,o}}],null&&b(t.prototype,null),e&&b(t,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e}();function w(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}document.addEventListener("DOMContentLoaded",(function(){var t;f.chatKey="aylhe",f.addMessage("adc"),f.addMessage("adc2"),f.addMessage("adc3"),f.addMessage("adc4"),f.addMessage("adc5"),(t=new URL(window.location.href)).search?(f.containsChat(new URLSearchParams(t).get("chatID")),v.style.display="flex"):function(){var t,e=function(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return w(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?w(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){c=!0,i=t},f:function(){try{a||null==n.return||n.return()}finally{if(c)throw i}}}}(f.getChats());try{for(e.s();!(t=e.n()).done;){var n=t.value;h.appendChild(_.render(n)),console.log(n,_.render(n))}}catch(t){e.e(t)}finally{e.f()}}(),d.innerText=l.trim()?l:"üë®üèª‚Äçüíª"})),y.addEventListener("submit",(function(t){t.preventDefault(),m.value.trim()&&(f.addMessage(m.value,".received-message"),m.value="")})),y.addEventListener("keypress",(function(t){13===t.keyCode&&y.dispatchEvent(new Event("submit"))}))})();